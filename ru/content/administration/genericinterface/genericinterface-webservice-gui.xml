<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">

<section id="webservice_gui">
    <title>Графический интерфейс веб-сервиса</title>
    <para>
        Графический пользовательский интерфейс  (GUI) является тем инструментом,
который позволяет создавать сложные настройки веб-сервиса в дружественной и
приятной среде интерфейса. Он позволяет:
    </para>
    <para>
        <itemizedlist>
            <listitem>
                <para>
                    Создание и Удалинеи веб-сервисов
                </para>
            </listitem>
            <listitem>
                <para>
                    Импортировать и Экспортировать настройки (в формате YAML) для существующих
веб-сервисов.
                </para>
            </listitem>
            <listitem>
                <para>
                    Просматривать, Возвращаться и Экспортировать устаревшие конфигурационные
параметры для существующих веб-сервисов на странице истории конфигурации.
                </para>
            </listitem>
            <listitem>
                <para>
                    Отслеживать все сообщения журнала для каждого из веб-сервисов на странице
Отладчика.
                </para>
            </listitem>
        </itemizedlist>
    </para>

    <section id="webservice_gui_overview">
        <title>Обзор Веб-интерфейса</title>
        <para>
            The <emphasis>Web Services</emphasis> link in the main screen of Admin
Interface (in the System Administration box) leads to the web services
overview screen, where you are able to manage your web service
configurations. You can add new web services or change the configuration of
the existing ones from this screen.
        </para>
        <para>
            Every web service configuration screen has in the upper part of the screen a
<emphasis>bread crumbs</emphasis> style navigation path. This navigation
path is useful to know exactly in which part of the web service
configuration we are, and also enables the user to jump back to any part of
the configuration process at any time (this action will not save any
changes).
        </para>
        <note>
            <para>
                To create a new web service, press the button <emphasis>Add web
service</emphasis>, and provide the required information.
            </para>
        </note>
        <para>
            <figure>
                <title>Web services overview</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-overview.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
        </para>
    </section>

    <section id="webservice_gui_add">
        <title>Добавить Веб Сервис</title>
        <para>
            The only required field in this part is the web service
<emphasis>Name</emphasis> that needs to be unique in the system and can not
be left empty. Other fields are also necessary for the configuration like
the <emphasis>Debug Threshold</emphasis> and <emphasis>Validity</emphasis>
but these fields are already populated with the default value for each list.
        </para>
        <para>
            The default value for <emphasis>Debug Threshold</emphasis> is
<emphasis>debug</emphasis>. When configured in this manner all communication
logs are registered in the database. Each subsequent <emphasis>Debug
Threshold</emphasis> value is more restrictive and discards communication
logs of lower order than the one set in the system.
        </para>
        <para>
            <itemizedlist>
                <title>Отладка уровней (от нижних к верхним)</title>
                <listitem>
                    <para>
                        Отладка
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Информация
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Уведомление
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Ошибка
                    </para>
                </listitem>
            </itemizedlist>
        </para>
        <para>
            It is also possible to define the network transport protocol for
<emphasis>OTRS as Provider</emphasis> and <emphasis>OTRS as
requester</emphasis>.
        </para>
        <para>
            Click on the <emphasis>Save</emphasis> button to register the new web
service in the database or click <emphasis>Cancel</emphasis> to discard this
operation. You will now be returned to the web service overview screen.
        </para>
        <para>
            If you already have a web service configuration file in YAML format you can
click on the <emphasis>Import web service</emphasis> button on the left side
of the screen. For more information on importing web services please check
the next section <emphasis>Web Service Change</emphasis>.
        </para>
        <note>
            <para>
                Нажмите на имя веб-сервиса на странице просмотра чтобы изменить или добавить
больше элементов веб-сервису.
            </para>
        </note>
        <para>
            <figure>
                <title>Web services add</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-add.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
        </para>
    </section>

    <section id="webservice_gui_examples">
        <title>Web Service Example Import</title>
        <para>
            Did you know there are example web services available in the <ulink
url="http://otrs.github.io/doc/manual/otrs-business-solution/stable/en/html/import-example-web-service.html">OTRS
Business Solution™</ulink>?
        </para>
    </section>

    <section id="webservice_gui_change">
        <title>Изменения веб-сервиса:</title>
        <para>
            На этом экране имеется полный набор по управлению каждой частью
веб-сервиса. Слева, в колонке "Действия" вы найдете несколько кнопок,
позволяющих выполнить все доступные действия над веб-сервисом:
        </para>
        <para>
        <itemizedlist>
            <listitem>
                <para>
                    Клонирование веб-сервиса.
                </para>
            </listitem>
            <listitem>
                <para>
                    Экспортировать веб-сервис.
                </para>
            </listitem>
            <listitem>
                <para>
                    Импортировать веб-сервис.
                </para>
            </listitem>
            <listitem>
                <para>
                    История конфигурации.
                </para>
            </listitem>
            <listitem>
                <para>
                    Удалить веб-сервис.
                </para>
            </listitem>
            <listitem>
                <para>
                    Отладчик.
                </para>
            </listitem>
        </itemizedlist>
        </para>
        <note>
            <para>
                <emphasis>Configuration history</emphasis> and <emphasis>Debugger</emphasis>
will lead you to different screens.
            </para>
        </note>

        <section id="webservice-clone">
            <title>Клонирование веб-сервиса:</title>
            <para>
                To clone a web service, you need to click on the <emphasis>Clone web
service</emphasis> button. A dialog will be shown where you can use the
default name or set a new name for the (cloned) web service.
            </para>
            <note>
                <para>
                    <emphasis>Remember</emphasis> that the name of the web service must be
unique within the system.
                </para>
            </note>
            <para>Click on <emphasis>Clone</emphasis> button to create the web service clone
or <emphasis>Cancel</emphasis> to close the dialog.</para>
            <para>
                <figure>
                    <title>Клонирование веб-сервиса</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-clone.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
            </para>
        </section>

        <section id="webservice-export">
            <title>Экспорт веб-сервиса</title>
            <para>
                The <emphasis>Export web service</emphasis> button gives you the opportunity
to dump the configuration of the current web service into a YAML file, to
download it and to store it on your file system. This can be specially
useful if you want to migrate the web service from one server to another,
for example from a testing environment to a production system.
            </para>
            <warning>
                <para>
                    Все сохраненные пароли в настройках веб-сервиса будут экспортированы в виде
обычного текста.
                </para>
            </warning>
            <para>
                Right after clicking the <emphasis>Export web service</emphasis> button a
save dialog of your browser will appear, just like when you click on a file
download link on a web page.
            </para>
            <note>
                <para>
                    Каждый браузер в каждой операционной системе имеет свои собственные экраны
диалога при сохранении и их вид. В зависимости от браузера и его настроек,
возможен вариант, когда дилог при сохранении не отображается и файл
сохраняется в каталоге по умолчанию для вашей файловой системы. Обратитесь к
к докментации на браузер для уточнения этих моментов.
                </para>
            </note>
            <para>
                <figure>
                    <title>Web services export</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-export.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
            </para>
        </section>

        <section id="webservice-import">
            <title>Импорт веб-сервиса:</title>
            <para>
                A valid web service configuration YAML file is required to use the import
web service feature. Click on the <emphasis>Import web service</emphasis>
button, browse for the configuration file or provide the complete path in
the input box.
            </para>
            <para>
                Click <emphasis>Import</emphasis> button to create a new web service from a
file or "Cancel" to close the dialog.
            </para>
            <note>
                <para>
                    The web service name will be taken from the configuration file name (e.g. if
the file name is <filename>MyWebservice.yml</filename> the resulting web
service will be named <emphasis>MyWebservice</emphasis>). If a web service
is registered in the system with the same name as the web service that you
want to import, the system will lead you to the web service change screen to
let you change the name of the imported web service.
                </para>
            </note>
            <para>
                <figure>
                    <title>Web services import</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-import.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
            </para>
        </section>

        <section id="webservice-history">
            <title>История веб-сервиса</title>
            <para>
                Every change to the web service configuration creates a new entry in the web
service history (as a journal). The web service history screen displays a
list of all configuration versions for a web service. Each row (version) in
the <emphasis>Configuration History List</emphasis> represents a single
revision in the web service history.
            </para>
            <para>
                Click on one of the rows to show the whole configuration as it was on that
particular date / time. The configuration will be shown in the
<emphasis>History details</emphasis> section of this screen. Here you are
also able to export the selected web service configuration version or to
restore that version into the current web service configuration.
            </para>
            <para>
                The <emphasis>Export web service configuration</emphasis> behaves exactly as
the "Export web service" feature in the web service change screen. For more
information refer to that section.
            </para>
            <para>
                If changes to the current web service configuration do not work as expected
and it is not easy to revert the changes manually, you can click on the
<emphasis>Revert web service configuration</emphasis> button. This will open
a dialog to ask you if you are sure to revert the web service
configuration. Click <emphasis>Revert web service configuration</emphasis>
in this dialog to replace the current configuration with the selected
version, or click <emphasis>Cancel</emphasis> to close the dialog.
            </para>
            <warning>
                <para>
                    Помните, что все пароли сохраненные в конфигурации веб-сервиса будут
экспортироваться в виде обычного текста.
                </para>
                <para>
                    Please be careful when you restore a configuration because this process is
irreversible.
                </para>
            </warning>
            <para>
                <figure>
                    <title>Web service history</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-history.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
            </para>
        </section>

        <section id="webservice-delete">
            <title>Удаление веб-сервиса</title>
            <para>
                Sometimes it is necessary to delete a web service completely.  To do this
you can press on the <emphasis>Delete web service</emphasis> button and a
new dialog will appear asking for confirmation.
            </para>
            <para>
                Click on <emphasis>Delete</emphasis> to confirm the removal of the web
service or on <emphasis>Cancel</emphasis> to close the dialog.
            </para>
            <warning>
                <para>
                    Операция удаления веб-сервиса не может быть отменена, пожалуйста, будьте
внимательны при удалении веб-сервисов.
                </para>
             </warning>
            <para>
                <figure>
                    <title>Удаление веб-сервиса</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-delete.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
            </para>
        </section>

        <section id="webservice-debugger">
            <title>Отладчик веб-сервиса:</title>
            <para>
                Отладчик хранит журнал веб-сервиса. На странице отладчика можно следить за
всеми связями веб-сервера, когда он работает в роли поставщика и получателя.
            </para>
            <para>
                Когда отображается эта страница начинает загружаться список запросов. После
того как список будет полность загружен, можно выбрать одну из строк (что
означает последовательность связей) и просмотреть подробню информацию. Эта
информация будет отображаться во всплывающем окне ниже.
            </para>
            <para>
                Можно сузить список используя фильтр в правой части страницы. Фильтрацию
можно производить по:
            </para>
            <itemizedlist>
                <listitem>
                    <para>
                        Тип связи (поставщик или запрашиваемая сторона)
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Дата: до и / или после определенной даты
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Удаленный IP-адрес
                    </para>
                </listitem>
                <listitem>
                    <para>
                        A combination of all
                    </para>
                </listitem>
            </itemizedlist>
            <para>
                After filter settings are set, push the <emphasis>Refresh</emphasis> button
and a new list will be displayed meeting your search criteria.
            </para>
            <note>
                <para>
                    В зависимости от критериев поиска установленых в фильтре,  новый поиск может
вернуть пустой список.
                </para>
            </note>
            <para>
                On the left part of the screen under the action column you can select
<emphasis>Go back to the web service</emphasis> or clear the debugger log by
pushing the <emphasis>Clear</emphasis> button.  This will open a dialog that
ask you to confirm erasing of the log. Click <emphasis>Clear</emphasis> in
the dialog button to perform the action or click on
<emphasis>Cancel</emphasis> to close this dialog.
            </para>
            <para>
                In the <emphasis>Request details</emphasis> section you can see all the
details for the selected communication. Here you can track the complete flow
and check for possible errors or confirm success responses.
            </para>
            <para>
                <figure>
                    <title>Web service debugger</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-debugger.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
            </para>
        </section>

        <section id="webservice-configuration-change">
            <title>Изменение настроек веб-службы</title>
            <para>
                Returning to the web service change screen, now we are going to review the
right side of it. Here we have the possibility to modify all the general
data for a web service such as name, description, debug threshold, etc. Also
there are two more sections below that allows us to modify specific
parameters for communication types <emphasis>OTRS as Provider</emphasis> and
<emphasis>OTRS as Requester</emphasis>.
            </para>
            <para>
                The web service configuration needs to be saved on each level. This means
that if a setting is changed, links to other, deeper parts of the
configuration will be disabled forcing you to save the current configuration
level. After saving the disabled links will be re-enabled again allowing you
to continue with the configuration.
            </para>
            <para>
                On the <emphasis>OTRS as provider</emphasis> section it is possible to set
or configure the network transport protocol. Only network transport
back-ends that are registered are shown on the list. To configure the
network transport click on the <emphasis>Configure</emphasis> button.  It is
also possible to add new operations in this box. To do this select one of
the available operations from the <emphasis>Add Operation</emphasis>
list. This will lead you to the operation configuration screen. After saving
the new operation it will be listed in the table above.
            </para>
            <para>
                <emphasis>OTRS as requester</emphasis> is very similar to the previous one,
but instead of <emphasis>operations</emphasis> you can add invokers here.
            </para>
            <para>
                Click the <emphasis>Save</emphasis> button to save and continue configuring
the web service, <emphasis>Save and finish</emphasis> to save and return to
the web service overview screen, or <emphasis>Cancel</emphasis> to discard
current configuration level changes and return to web service overview
screen.
            </para>
            <para>
                <figure>
                    <title>Web services change</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-change.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
            </para>
            <note>
                <para>
                    Like the other Generic Interface configuration screens such as Network
Transport, Operation, Invoker and Mapping, the initial configuration (add)
screen will only present two options: <emphasis>Save</emphasis> and
<emphasis>Cancel</emphasis>. If the configuration is re-visited, a new
option <emphasis>Save and Finish</emphasis> will appear.  The behavior of
this feature is defined below.
                </para>
                <para>
                    <emphasis>Save</emphasis> will store the current configuration level in the
database and it will return to the previous screen to review your changes or
to configure deeper settings.
                </para>
                <para>
                    <emphasis>Save and Finish</emphasis> will store the current configuration
level in the database and it will return to the previous screen in the
configuration hierarchy (to the immediate upper configuration level).
                </para>
                <para>
                    <emphasis>Cancel</emphasis> will discard any configuration change to the
current configuration level and will return to the previous screen in the
configuration hierarchy.
                </para>
            </note>

            <section id="webservice-provider-network-transport">
                <title>Транспортаня сеть Веб-сервиса</title>
                <para>
                    In future the list of available network transports will be
increased. Currently only <emphasis>HTTP::SOAP</emphasis> and
<emphasis>HTTP::REST</emphasis> transports are available. Each transport has
different configuration options to setup and they might use different
frontend modules to configure them.
                </para>
                <para>
                    It is quite simple to configure the <emphasis>HTTP::SOAP</emphasis> protocol
as provider.  There are only two settings: <emphasis>Namespace</emphasis>
and <emphasis>Maximum message length</emphasis>. These fields are
required. The first one is a URI to give SOAP methods a context, reducing
ambiguities, and the second one is a field where you can specify the maximum
size (in bytes) for SOAP messages that OTRS will process.
                </para>
                <para>
                    <figure>
                        <title>Web service provider network transport (HTTP::SOAP)</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-provider-transport-soap.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
                </para>
                <para>
                    Optionally, you may want to define additional response headers. These may be
used to add static header values to every response. Just click on Add
response header and fill both key and value fields. There is no limit in
number of additional header lines.
                </para>
                <para>
                    For <emphasis>HTTP::REST</emphasis> the configuration might be a bit more
complicated, as it grows dynamically for each configured operation by
adding: <emphasis>Route mapping for Operation
'&lt;OperationName&gt;':</emphasis> and <emphasis>Valid request methods for
Operation '&lt;OperationName&gt;':</emphasis> settings to the default
transport settings <emphasis>Maximum message length:</emphasis> and
<emphasis>Send Keep-Alive:</emphasis>
                </para>
                <itemizedlist mark="round">
                    <listitem>
                        <para>Карта маршрута для выполнения операции '&lt;OperationName&gt;':</para>
                        <para>
                            In this setting a resource path is set. This path must be defined according
to the needs of the web service considering that the path in conjunction
with the HTTP request method determines the Generic Interface operation to
be executed.
                        </para>
                        <para>
                            Путь может содержать переменные в виде  ':&lt;ИмяПеременной&gt;' каждая
строка части пути заполняемая вместо переменной будет добавлена к запросу,
используя имя переменной заданной в этом параметре.
                        </para>
                        <para>
                            Примеры:
                        </para>
                        <itemizedlist mark="round">
                            <para>
                                Карта маршрута: /Resource
                            </para>
                            <listitem>
                                <para>Допустимые запросы:</para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource
                                </para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource?Param1=One
                                </para>
                            </listitem>
                            <listitem>
                                <para>Недопустимые запросы:</para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/
                                </para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource
                                </para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource?Param1=One
                                </para>
                            </listitem>
                        </itemizedlist>
                        <itemizedlist mark="round">
                            <para>
                                Карта маршрута: /Resource/:ID
                            </para>
                            <listitem>
                                <para>Допустимые запросы:</para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/1
                                </para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/1?Param1=One
                                </para>
                                <para>
                                    In both cases ID = 1 will be sent to the operation as part of the
payload. In the second case also Param1 = One will be added, depending on
the HTTP request method other parameters will be added if they come as a
JSON string in the request header.
                                </para>
                            </listitem>
                            <listitem>
                                <para>Недопустимые запросы:</para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource
                                </para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource?Param1=One
                                </para>
                            </listitem>
                        </itemizedlist>
                        <itemizedlist mark="round">
                            <para>
                                Карта маршрута: /Resource/OtherResource/:ID/:Color
                            </para>
                            <listitem>
                                <para>Допустимые запросы:</para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource/1/Red
                                </para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherReosurce/123/Blue?Param1=One
                                </para>
                                <para>
                                    В первом примере ID = 1 and Цвет = Красный, тогда как во втором ID = 123 and
Цвет = Синий.
                                </para>
                            </listitem>
                            <listitem>
                                <para>Недопустимые запросы:</para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/1
                                </para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource/1
                                </para>
                                <para>
                                    http://localhost/otrs/nph-genericinterface.pl/Webservice/Test/Resource/OtherResource/1?Param1=One
                                </para>
                                <para>
                                    In the first example the part of the path '/OtherResource' is missing as
well as the :Color variable, on the second example just :Color variable is
missing.
                                </para>
                            </listitem>
                        </itemizedlist>
                    </listitem>
                </itemizedlist>
                <itemizedlist mark="round">
                    <listitem>
                        <para>Допустимые методы запроса для Операции '&lt;ИмяОперации&gt;':</para>
                        <para>
                            The HTTP request methods to determine the operation to use together with the
route mapping, possible options: CONNECT, DELETE, GET, HEAD, OPTIONS, PATCH,
POST, PUT and TRACE.
                        </para>
                        <para>
                            Totally different operations can share exactly the same mapping path, but
the request method must be unique for each operation, in order to determine
correctly the operation to use on each request.
                        </para>
                    </listitem>
                </itemizedlist>
                <para>
                    <figure>
                        <title>Web service provider network transport (HTTP::REST)</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-provider-transport-rest.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
                </para>
            </section>

            <section id="webservice-operation">
                <title>Операции веб-сервиса</title>
                <para>
                    The actions that can be performed when you are using OTRS as a provider are
called <emphasis>Operations</emphasis>. Each operation belongs to a
controller. Controllers are collections of operations or invokers, normally
operations from the same controller need similar settings and share the same
configuration dialog. But each operation can have independent configuration
dialogs if needed.
                </para>
                <para>
                    <emphasis>Name</emphasis>, <emphasis>Description</emphasis>,
<emphasis>Backend</emphasis> and <emphasis>Mappings</emphasis> are fields
that normally appear on every operation, other special fields can appear in
non default configuration dialogs to fulfill specific needs of the
operation.
                </para>
                <para>
                    Normally there are two mapping configuration sections on each operation, one
for the incoming data and another one for the outgoing data. You can choose
different mapping types (backends) for each mapping direction, since their
configuration is independent from each other and also independent from the
operation backend. The normal and most common practice is that the operation
uses the same mapping type in both cases (with inverted configuration). The
complete mapping configuration is done in a separate screen which depends on
the mapping type.
                </para>
                <para>
                    The operation backend is pre-populated and is not editable. You will see
this parameter when you choose the operation on the web service edit
screen. The field is only informative.
                </para>
                <para>
                    In the left part of the screen on the action column you have the options:
<emphasis>Go back to web service</emphasis> (discarding all changes since
the last save) and <emphasis>Delete</emphasis>.  If you click on the last
one, a dialog will open and ask you if you like to remove the
operation. Click on <emphasis>Delete</emphasis> button to confirm the
removal of the operation and its configuration or
<emphasis>Cancel</emphasis> to close the delete dialog.
                </para>
                <para>
                    <figure>
                        <title>Web service operation</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-operation.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
                </para>
            </section>

            <section id="webservice-requester-transport">
                <title>Web Service Requester Network Transport</title>
                <para>
                    The network transport configuration for the requester is similar to the
configuration for the provider. For the Requester
<emphasis>HTTP::SOAP</emphasis> network transport there are more fields to
be set.
                </para>
                <para>
                    Apart from the <emphasis>Endpoint</emphasis> (URI of the Remote System web
service interface to accept requests) and <emphasis>Namespace</emphasis>
which are required fields, you can also specify:
                </para>
                <itemizedlist>
                    <listitem>
                        <para>
                            Кодировка (такая как utf-8, latin1, iso-8859-1, cp1250, и т.д.) для
SOAP-сообщений.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            SOAPAction Header: you can use this to send an empty or filled SOAPAction
header. Set to <emphasis>No</emphasis> and the SOAPAction header on the SOAP
message will be an empty string, or set to <emphasis>Yes</emphasis> to send
the SOAP action in Namespace#Action format and define the separator
(typically "/" for .Net web services and "#" for the REST).
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Аутентификация: установить механизм аутентификации, установлено в "-" чтобы
не использовать любую проверку подлинности или выбрать ее из списка, после
чего появится поле с подробной информацией.
                        </para>
                    </listitem>
                </itemizedlist>
                <note>
                    <para>
                        Currently only the <emphasis>BasicAuth</emphasis> (HTTP) authentication
mechanism is implemented. You can decide whether or not to use it depending
on the Remote System configuration. If used, you must provide the User Name
and the Password to access the remote system.
                    </para>
                </note>
                <warning>
                    <para>
                        Если вы используете пароль для аутентификации, то при экспорте настроек
веб-сервиса в YAML-файл этот пароль будет раскрыт и записан в виде простой
текстовой строки внутри файла YAML. Знайте об этом и примите меры
предосторожности в случае необходимости.
                    </para>
                </warning>
                <para>
                    <figure>
                        <title>Web service requester network transport (HTTP::SOAP)</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-requester-transport-soap.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
                </para>
                <para>
                    In the case of HTTP::REST, this configuration also grows dynamically
depending on the configured invokers by adding <emphasis>Controller mapping
for Invoker '&lt;InvokerName&gt;':</emphasis> and <emphasis>Valid request
command for Invoker '&lt;InvokerName&gt;':</emphasis> for each
invoke. Authentication and SSL options are similar to the ones in HTTP::SOAP
                </para>
                <itemizedlist mark="round">
                    <listitem>
                        <para>Сервер</para>
                        <para>
                            Имя хоста/сервера или IP адрес и порт удаленной системы, если порт не задан,
по умолчанию используется порт 80.
                        </para>
                    </listitem>
                </itemizedlist>
                <itemizedlist mark="round">
                    <listitem>
                        <para>Controller mapping for Invoker '&lt;InvokerName&gt;':</para>
                        <para>
                            In this setting a resource path is set. This path must be defined according
to the needs of the remote web service and following its definition.
                        </para>
                        <para>
                            Path can contain variables in the form of ':&lt;VariableName&gt;' for each
variable name that matches the current data (to be sent), will be replaced
by the corresponding data value. This matched variable names and values will
be removed from the current data. Depending on the HTTP request command the
remaining data could be sent as a JSON string in the request body or as
query parameters within the URI.
                        </para>
                        <para>
                            Примеры:
                        </para>
                        <para>
                            Для данных: Var1 = One, Var2 = Two, Var3 = Three and Var4 = Four.
                        </para>
                        <itemizedlist mark="round">
                            <para>
                                Controller mapping: /Resource
                            </para>
                            <listitem>
                                <para>После замен:</para>
                                <para>/Resource</para>
                            </listitem>
                            <listitem>
                                <para>Оставшиеся данные:</para>
                                <para> Var1 = One, Var2 = Two, Var3 = Three and Var4 = Four</para>
                            </listitem>
                        </itemizedlist>
                        <itemizedlist mark="round">
                            <para>
                                Controller mapping: /Resource/:Var1
                            </para>
                            <listitem>
                                <para>После замен:</para>
                                <para>/Resource/One</para>
                            </listitem>
                            <listitem>
                                <para>Оставшиеся данные:</para>
                                <para> Var2 = Two, Var3 = Three and Var4 = Four</para>
                            </listitem>
                        </itemizedlist>
                       <itemizedlist mark="round">
                            <para>
                                Controller mapping: /Resource/:Var1?Param1=:Var2&amp;Var3=:Var3
                            </para>
                            <listitem>
                                <para>После замен:</para>
                                <para>/Resource/One?Param1=Two&amp;Var3=Three</para>
                            </listitem>
                            <listitem>
                                <para>Оставшиеся данные:</para>
                                <para>Var4 = Four</para>
                            </listitem>
                        </itemizedlist>
                    </listitem>
                </itemizedlist>
                <itemizedlist mark="round">
                    <listitem>
                        <para>Допустимая команда запроса для Вызова '&lt;ИмяВызова&gt;':</para>
                        <para>
                            This determine the HTTP request method to use, possible options: CONNECT,
DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT and TRACE. If no command is
selected, Default command is used.
                        </para>
                    </listitem>
                </itemizedlist>
                <itemizedlist mark="round">
                    <listitem>
                        <para>Команда по умолчанию</para>
                        <para>
                            Used as a fall-back for all Invokers without a defined request command.
                        </para>
                    </listitem>
                </itemizedlist>
                <para>
                    <figure>
                        <title>Web service requester network transport (HTTP::REST)</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-requester-transport-rest.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
                </para>
            </section>

            <section id="webservice-invoker">
                <title>Вызов веб-сервиса:</title>
                <para>
                    The actions that can be performed when you are using OTRS as a requester are
called <emphasis>Invokers</emphasis>. Each invoker belongs to a controller
(controllers are collections of operations or invokers). Usually invokers
from the same controller need similar settings and share the same
configuration dialogs.  Each invoker can have independent configuration
dialogs if needed.
                </para>
                <para>
                    <emphasis>Name</emphasis>, <emphasis>Description</emphasis>,
<emphasis>Backend</emphasis> and <emphasis>Mappings</emphasis> are fields
that normally appear on every invoker. Additionally the list of event
triggers and other special fields can appear on non default configuration
dialogs to fulfill special needs of the invoker.
                </para>
                <para>
                    Normally there are two mapping configuration sections for each invoker, one
for the incoming data and another one for the outgoing data. You can choose
different mapping types (backends) for each mapping direction, since their
configuration is independent from each other and also independent from the
invoker backend. The normal and most common practice is that the invoker
uses the same mapping type in both cases, with inverted configuration. The
complete mapping configuration is done in a separate screen, which depends
on the mapping type.
                </para>
                <para>
                    The invoker backend is pre-populated and can not be edited. You will see
this parameter when you choose the invoker on the web service edit
screen. The field is only informative.
                </para>
                <para>
                    Event triggers are events within OTRS such as
<literal>TicketCreate</literal>, <literal>ArticleSend</literal>, etc. These
can act as triggers to execute the invoker. Each invoker needs to have at
least one event trigger registered, or the invoker will be useless, because
it will never be called. Additionally a set of rules (conditions) for each
event can be defined to have more control over the triggering of the events,
This rules depends on the data of the object associated with the event.  The
asynchronous property of the event triggers define if the OTRS process will
handle the invoker or if it will be delegated to the OTRS Daemon.
                </para>
                <note>
                    <para>
                        The OTRS Daemon is a separate set of process that executes tasks in the
background. Using this the OTRS process itself will not be affected if the
Remote System takes a long time to respond, if it is not available or if
there are network problems. If you don't use the OTRS Daemons using web
services can make OTRS slow or non-responsive. Therefore it is highly
recommend to use asynchronous event triggers as often as possible.
                    </para>
                </note>
                <para>
                    To add an Event trigger, first select the event family from the first list,
then the event name from the second list, then set the asynchronous property
(if unchecked means that the event trigger will not be asynchronous) and
finally click on the plus button. A new event trigger will be created and it
will be listed on the invoker <emphasis>Event Triggers</emphasis> list.
                </para>
                <para>
                    From the <emphasis>Event Triggers</emphasis> list each events shows if it
contains conditions or not.  The edit button next to the condition property
allows to add or edit the current conditions of the event.
                </para>
                <para>
                    To delete an Event trigger, simply locate the event trigger to be deleted in
the <emphasis>Event Triggers</emphasis> list and click on the trash icon at
the end of the row. This will open a dialog that asks you if you are sure to
delete the event trigger.  Click <emphasis>Delete</emphasis> to remove the
event trigger from the list, or <emphasis>Cancel</emphasis> to close the
dialog.
                </para>
                <para>
                    In the left part of the screen on the action column you have the options:
<emphasis>Go back to web service</emphasis> (discarding all changes since
the last save) and "Delete".  If you click on the last one, a dialog will
emerge and ask you if you like to remove the invoker. Click on the
<emphasis>Delete</emphasis> button to confirm the removal of the invoker and
its configuration or <emphasis>Cancel</emphasis> to close the delete dialog.
                </para>
                <para>
                    <figure>
                        <title>Web service invoker</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-invoker.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
                </para>
            </section>

            <section id="webservice-invoker-event">
                <title>Web Service Invoker Event</title>
                <para>
                    Sometimes defining an event to trigger an invoker could result in many
unnecessary or wrong request to a remote server. Event conditions could be
set to restrict the triggering of the invoker in such cases.
                </para>
                <para>
                    To access the event settings screen where the conditions can be defined is
necessary to be in the invoker screen and from there click on the edit icon
next to the condition status on the event where this conditions should take
effect.
                </para>
                <para>
                    Within the event settings screen in the action bar there is a button to go
back to the invoker screen as well as a button to remove all the event
conditions.  By default the screen is pre-populated with the first
condition. Update the Type of linkings between conditions if more than one
condition is planned, then change the Type of linking from
<emphasis>Condition 1</emphasis> if more than one field is planned. Both
linking fields accepts <emphasis>and</emphasis>, <emphasis>or</emphasis> or
<emphasis>xor</emphasis> as values.
                </para>
                <para>
                    Fill the <emphasis>Field</emphasis> name, set the matching type
(<emphasis>String</emphasis> for exact match, <emphasis>Regexp</emphasis>
for regular expression or <emphasis>Validation Module</emphasis>) and set
Value to match (in case of <emphasis>Validation Module</emphasis> the full
class name like:
<literal>Kernel::GenericInterface::Event::Validation::ValidateDemo</literal>).
                </para>
                <para>
                    To add more fields to the condition, click on the <emphasis>+</emphasis>
button in the fields header. To remove a field, click on the
<emphasis>-</emphasis> button in the field row. It is necessary to keep at
least one field per condition.
                </para>
                <para>
                    To add more conditions clock on the button below the last condition box.  To
remove remove a condition, click on the <emphasis>-</emphasis> button in the
condition header.  It is necessary to keep at least one condition in the
set. To remove all conditions use the button in the sidebar.
                </para>
                <para>
                    <figure>
                        <title>Web service invoker event</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-invoker-event.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
                </para>
            </section>

            <section id="webservice-mapping">
                <title>Веб Сервис</title>
                <para>
                    There are cases where you need to transform the data from one format to
another (map or change data structure), because normally a web service is
used to interact with a Remote System, that is highly probable that is not
another OTRS system and / or could not understand the OTRS data structures
and values. In these cases some or all values have to be changed, and
sometimes even the names of the values (keys) or even the complete
structure, in order to match with the expected data on the other end.  To
accomplish this task the Generic Interface Mapping Layer exists.
                </para>
                <para>
                    Each Remote System has it own data structures and it is possible to create
new mapping modules for each case (e.g. there is a customized mapping module
for SAP Solution Manager shipped with OTRS), but it is not always
necessary.  The module <literal>Mapping::Simple</literal> should cover most
of the mapping needs.
                </para>
                <note>
                    <para>
                        When <literal>Mapping::Simple</literal> does not cover all mapping needs for
a web service, a new mapping module should be created. To learn more about
how to create new mapping modules please consult the OTRS Development
Manual.
                    </para>
                </note>
                <para>
                    Этот модуль дает возможность установить значение для отображения по
умолчанию для каждого ключа или значения для всех передаваемых данных.
                </para>
                <para>
                    At the beginning of the screen you will see a general section where you can
set the default rules that will apply for all the unmapped keys and
values. There are three options available, these options are listed below:
                </para>
                <itemizedlist>
                    <listitem>
                        <para>
                            Не изменять: не касается ключей и значений в любом случае.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Ignore (drop key/value pair): when this is applied to the key it deletes the
key and value, because when a key is deleted then in consequence its
associated value is deleted too. When this is applied to the value, only the
value is deleted, keeping the key, that now will be associated to an empty
value.
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            MapTo (use provided key or value as default): all keys and / or values
without a defined map rule, will use this as default, when you select this
option a new text field will appear to set this default.
                        </para>
                    </listitem>
                </itemizedlist>
                <para>
                    Clicking on the <emphasis>+</emphasis> button for new key map, will display
a new box for a single mapping configuration. You can add as many key
mappings as needed. Just click on the <emphasis>+</emphasis> button again
and a new mapping box will appear below the existing one. From this mapping
boxes you can define a map for a single key, with the next options:
                </para>
                <para>
                    <itemizedlist>
                        <listitem>
                            <para>
                                Точное значение(я): строка со старым значением будет заменена новой в случае
полного совпадения "старого" ключа.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Regular expression: the key string will be replaced following a regular
expression rule.
                            </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>
                    Pressing the new value map <emphasis>+</emphasis> button will display a new
row for a value map.  Here it is also possible to define rules for each
value to be mapped with the same options as for the key map (Exact value and
Regular expression). You can add as many values to map as needed, and if you
want to delete one of them, just click on the <emphasis>-</emphasis> button
for each mapping value row.
                </para>
                <para>
                    Deleting the complete key mapping section (box) is possible, just push on
the <emphasis>-</emphasis> button located on the up right corner of each box
that you want to delete.
                </para>
                <para>
                    If you need to delete a complete mapping configuration: go back to the
corresponding operation or invoker screen, look for the mapping direction
that you select before and set its value to <emphasis>-</emphasis>, and save
the configuration to apply changes.
                </para>
                <para>
                    <figure>
                        <title>Web service mapping</title>
<screenshot>
<graphic
fileref="screenshots/administration/genericinterface/genericinterface-webservice-mapping.png"
scalefit="1" width="100%" contentdepth="100%"></graphic></screenshot></figure>
                </para>
            </section>
        </section>
    </section>
</section>
